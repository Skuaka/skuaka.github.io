<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="author" content="Skuaka">


    
    


<meta name="description" content="For you, a thousand times over.">
<meta name="keywords" content="skuaka">
<meta property="og:type" content="website">
<meta property="og:title" content="Skuaka">
<meta property="og:url" content="http://blog.skuaka.cn/page/5/index.html">
<meta property="og:site_name" content="Skuaka">
<meta property="og:description" content="For you, a thousand times over.">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Skuaka">
<meta name="twitter:description" content="For you, a thousand times over.">

<link rel="apple-touch-icon" href="/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="Skuaka" type="application/atom+xml">



    <link rel="shortcut icon" href="/img/avatar.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Skuaka</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: false
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head></html>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Skuaka</a></h1>
        </hgroup>

        
        <p class="header-subtitle">For you, a thousand times over.</p>
        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>Menu</li>
                        <li>Tags</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">Home</a></li>
                        
                            <li><a href="/archives/">Archives</a></li>
                        
                            <li><a href="/tags/">Tags</a></li>
                        
                            <li><a href="/about/">about</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:skuaka@icloud.com" title="Email"></a>
                            
                                <a class="fa bilibili" href="https://space.bilibili.com/5006495" title="bilibili"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/unp/"><unp></unp></a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C-C/">C/C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CCIE/">CCIE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CMake/">CMake</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DDos/">DDos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DTD/">DTD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/">Database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DoNotStarve/">DoNotStarve</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dreamweaver/">Dreamweaver</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Game/">Game</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/">IO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/">Javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jenkins/">Jenkins</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Job/">Job</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kali/">Kali</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Makefile/">Makefile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/">Markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MetaProgram/">MetaProgram</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mp3/">Mp3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mysql/">Mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Network/">Network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Op-System/">Op-System</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Perl/">Perl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PostgreSQL/">PostgreSQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/QT/">QT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Raspberrypi/">Raspberrypi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQLserver/">SQLserver</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Security/">Security</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tcp-ip/">Tcp/ip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vultr/">Vultr</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Wifi/">Wifi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Wireshark/">Wireshark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XML/">XML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apache/">apache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/base64/">base64</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gcc-gdb/">gcc,gdb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s/">k8s</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macOS/">macOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openSSL/">openSSL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postman/">postman</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/robotframework/">robotframework</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/steamcmd/">steamcmd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/">sublime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swagger/">swagger</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/travis/">travis</a></li></ul>
                    </div>
                </section>
                
                
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Skuaka</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Skuaka</a></h1>
            </hgroup>
            
            <p class="header-subtitle">For you, a thousand times over.</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">Home</a></li>
                
                    <li><a href="/archives/">Archives</a></li>
                
                    <li><a href="/tags/">Tags</a></li>
                
                    <li><a href="/about/">about</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:skuaka@icloud.com" title="Email"></a>
                            
                                <a class="fa bilibili" target="_blank" href="https://space.bilibili.com/5006495" title="bilibili"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="Tags" friends="Friends" about="About Me">
</nav>
      <div class="body-wrap">
  
    <article id="post-Linux/System/SIGINT-SIGTERM-SIGKILL区别" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/04/24/Linux/System/SIGINT-SIGTERM-SIGKILL区别/" class="article-date">
      <time datetime="2019-04-24T12:31:15.000Z" itemprop="datePublished">2019-04-24</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/24/Linux/System/SIGINT-SIGTERM-SIGKILL区别/">SIGINT SIGTERM SIGKILL区别</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="SIGINT-SIGTERM-SIGKILL区别"><a href="#SIGINT-SIGTERM-SIGKILL区别" class="headerlink" title="SIGINT SIGTERM SIGKILL区别"></a>SIGINT SIGTERM SIGKILL区别</h3><p>参考：<a href="https://www.cnblogs.com/alexyuyu/articles/3853583.html" target="_blank" rel="noopener">https://www.cnblogs.com/alexyuyu/articles/3853583.html</a></p>
<p>三者都是结束/终止进程运行。</p>
<ol>
<li><p>SIGINT SIGTERM区别</p>
<p>前者与字符ctrl+c关联，后者没有任何控制字符关联。</p>
<p>SIGINT 会被当前进程树接收到，也就是说，不仅当前进程会收到信号，它的子进程也会收到。</p>
<p>SIGTERM 只有当前进程收到信号，子进程不会收到。如果当前进程被kill了，那么它的子进程的父进程将会是 init 进程。</p>
</li>
<li><p>SIGTERM SIGKILL的区别</p>
<p>前者可以被阻塞、处理和忽略，但是后者不可以。</p>
<p>KILL 命令的默认参数发送的信号就是 SIGTERM。</p>
<p><code>kill -9 进程号</code> 发送的则是不能被捕获的 SIGKILL。</p>
</li>
</ol>
<p>自己试验：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;                                                                                                                                                    </span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;                                                                         </span><br><span class="line">    fork();                                                                          </span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;&#125;                                                                       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_12_centos T]# ./a.out &amp;                                                       </span><br><span class="line">[1] 12831                                                                                </span><br><span class="line">[root@VM_0_12_centos T]# ps                                                              </span><br><span class="line">  PID TTY          TIME CMD                                                              </span><br><span class="line">12538 pts/1    00:00:00 bash                                                             </span><br><span class="line">12831 pts/1    00:00:01 a.out                                                            </span><br><span class="line">12832 pts/1    00:00:01 a.out                                                            </span><br><span class="line">12838 pts/1    00:00:00 ps                                                               </span><br><span class="line">[root@VM_0_12_centos T]# fg                                                              </span><br><span class="line">./a.out                                                                                  </span><br><span class="line">^C                                                                                                                                                </span><br><span class="line">[root@VM_0_12_centos T]# ps                                                              </span><br><span class="line">  PID TTY          TIME CMD                                                              </span><br><span class="line">12538 pts/1    00:00:00 bash                                                             </span><br><span class="line">12881 pts/1    00:00:00 ps</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_12_centos T]# ./a.out &amp;                                                       </span><br><span class="line">[1] 13027                                                                                </span><br><span class="line">[root@VM_0_12_centos T]# ps</span><br><span class="line">  PID TTY          TIME CMD</span><br><span class="line">12538 pts/1    00:00:00 bash</span><br><span class="line">13027 pts/1    00:00:00 a.out</span><br><span class="line">13028 pts/1    00:00:00 a.out</span><br><span class="line">13029 pts/1    00:00:00 ps       </span><br><span class="line">[root@VM_0_12_centos T]# kill -l</span><br><span class="line"> 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL       5) SIGTRAP</span><br><span class="line"> 6) SIGABRT      7) SIGBUS       8) SIGFPE       9) SIGKILL     10) SIGUSR1</span><br><span class="line">11) SIGSEGV     12) SIGUSR2     13) SIGPIPE     14) SIGALRM     15) SIGTERM</span><br><span class="line">16) SIGSTKFLT   17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP</span><br><span class="line">21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU     25) SIGXFSZ</span><br><span class="line">26) SIGVTALRM   27) SIGPROF     28) SIGWINCH    29) SIGIO       30) SIGPWR</span><br><span class="line">31) SIGSYS      34) SIGRTMIN    35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3</span><br><span class="line">38) SIGRTMIN+4  39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8</span><br><span class="line">43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13</span><br><span class="line">48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12</span><br><span class="line">53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7</span><br><span class="line">58) SIGRTMAX-6  59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2</span><br><span class="line">63) SIGRTMAX-1  64) SIGRTMAX    </span><br><span class="line">[root@VM_0_12_centos T]# kill -4 13027</span><br><span class="line">[root@VM_0_12_centos T]# ps</span><br><span class="line">  PID TTY          TIME CMD</span><br><span class="line">12538 pts/1    00:00:00 bash</span><br><span class="line">13028 pts/1    00:00:24 a.out</span><br><span class="line">13107 pts/1    00:00:00 ps</span><br><span class="line">[1]+  Illegal instruction     ./a.out</span><br><span class="line">[root@VM_0_12_centos T]# fg                                                              </span><br><span class="line">-bash: fg: current: no such job</span><br></pre></td></tr></table></figure>
<p>可见原来的命令进程被kill后，fork出来的进程变成了非法指令。只能再kill掉。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Mess/趋势科技秋招面经" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/04/23/Mess/趋势科技秋招面经/" class="article-date">
      <time datetime="2019-04-23T12:57:21.000Z" itemprop="datePublished">2019-04-23</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/23/Mess/趋势科技秋招面经/">趋势科技 Linux C++ 面经</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="趋势科技秋招-Linux-C-面经"><a href="#趋势科技秋招-Linux-C-面经" class="headerlink" title="趋势科技秋招 Linux C++ 面经"></a>趋势科技秋招 Linux C++ 面经</h2><h3 id="一面"><a href="#一面" class="headerlink" title="一面"></a>一面</h3><p>网络相关：</p>
<p>问：TCP 和 IP 分别是哪一层的？</p>
<p>答：略</p>
<p>问：ICMP 是哪一层的，有哪些功能</p>
<p>答：略</p>
<p>问：http 协议的内容</p>
<p>答：先是请求头，然后是一些字段和字段值，然后是数据</p>
<p>问：那 head 和 body 之间是用什么分隔的</p>
<p>答：杠r杠n</p>
<p>问：用http传输一个文件body怎么实现？</p>
<p>答：我不太清楚这个问题的意思</p>
<p>问：base64 了解吗？</p>
<p>答：哦原来是这个意思，就是三八二十四，即把三个字节的内容用，二十四除以六，即四个字符来表示。</p>
<p>C/C++ 相关：</p>
<p>问：++i 和 i++ 哪个性能更好</p>
<p>答：++i，但是现在编译器都会优化的。</p>
<p>问：大端小端知道吗</p>
<p>答：知道</p>
<p>问：如果把一个结构体强制类型转化为另一个结构体，使用它的成员(在黑板上举了个例子<code>a-&gt;B</code>)，那么能编译成功吗？</p>
<p>答：能</p>
<p>问：我的这个例子，<code>a-&gt;B</code> 它运行起来是什么</p>
<p>答：如果他们两个结构体的第一个成员的字节数是相同的，那么这个其实就是指向的第一个成员，用起来没有什么问题，反之，有问题。</p>
<p>问：堆和栈？</p>
<p>答：略</p>
<p>问：static 的作用</p>
<p>答：静态存储区，内部作用域</p>
<p>问：编译 和 链接 做的事情</p>
<p>答：编译把 .c 编译成二进制文件 .o，如果一个函数在一个地方声明使用了，在链接的时候就要把定义它的 .o 文件链接起来。</p>
<p>问：那么如果有两个地方都定义了，编译时报错，怎么解决？</p>
<p>答：我不知道有什么编译选项可以做到这个，我会做的就是修改其中一个的名字，或者改变作用域。我说用namespace。</p>
<p>交流：面试官说其实刚才说的 static 就行，我说对对对。</p>
<p>问：那还有其他方法吗？</p>
<p>答：不知道，没碰到过</p>
<p>回：没关系，其实很少遇到，正常的</p>
<p>Linux 相关</p>
<p>问：用 shell 登入之后，执行一个程序，但是退出后程序就终止了，有什么办法</p>
<p>答：screen</p>
<p>回：对，还有什么办法呢？nohup 知道吗</p>
<p>答：不知道(后来发现其实我了解过，当时忘了，悔恨)</p>
<p>问：死锁是什么情况</p>
<p>答：举了个两个线程互相lock的例子</p>
<p>问：那怎么解决呢</p>
<p>想了很久，想不出来往什么方面思考，故答：别这么写不就行了</p>
<p>回我：额，对~</p>
<p>项目相关问题：</p>
<p>问：你的线程池的调度方法</p>
<p>答：条件变量，balabala…</p>
<p>问：<code>notify_one()</code> 的底层实现原理是什么</p>
<p>答：不知道</p>
<p>问：你用的是C++11的线程方法，那么操作系统提供了哪些线程通信方法</p>
<p>答：信号量，互斥量(其实我不知道怎么回答，因为C++的线程库已经很全面了，面试官也没继续问)</p>
<p>问：线程池的线程数量也是有问题的，你开了几个，为什么</p>
<p>答：6个，因为数量多的话只能并发，并不能并行，因为CPU个数和核数是有限的。</p>
<p>算法相关：</p>
<p>问：删除一个 <code>vector&lt;int&gt;</code> 里面的偶数</p>
<p>写：直接用 erase 和 lambda 函数(后来发现写错了，回去看了下文档 erase 没有重载可选的谓词参数，其实应该用 C++20 的 erase_if，但是面试官当时应该没发现)</p>
<p>问：其实我刚才只是看一下你对 STL 的掌握程度，自己实现呢？</p>
<p>一开始没想出来，面试官提示了一下：交换，然后我立马说知道怎么做了。</p>
<p>答：把后面的元素复制到前面是偶数的地方，最后一次性删除后面剩余的元素，然后写了一下。</p>
<p>SQL 相关：</p>
<p>问：项目里写的SQL有什么安全问题需要关注的吗</p>
<p>答：存密码的时候md5加密一下</p>
<p>问：其实我问的是SQL注入方面的，你了解吗</p>
<p>答：此处省略SQL注入定义。。。可以查找特殊字符然后删除</p>
<p>问：有时候用户并不想删除呢</p>
<p>答：可以像html一样用转义字符</p>
<p>问：SQL性能优化的方法</p>
<p>答：索引相关，balabala…</p>
<p>问：索引也有弊端</p>
<p>答：插入和删除会变慢</p>
<p>问：索引的数据结构</p>
<p>答：B+树</p>
<h3 id="二面"><a href="#二面" class="headerlink" title="二面"></a>二面</h3><p>STL 相关：</p>
<p>问：STL 平时用哪些</p>
<p>答：比如我这个项目存储用户信息就是用的无序map也就是哈希表</p>
<p>问：为什么不用其他的</p>
<p>答：其他的查找要遍历，这个时间 O(1)</p>
<p>问：还有什么</p>
<p>答：比如我这个线程池的工作队列就是 queue，其实它就是对 deque 的封装</p>
<p>问：为什么不用 deque 呢</p>
<p>答：因为队列只需要尾部插入，头部弹出这两个动作，使用封装的 queue 更加安全。</p>
<p>问：deque 和 vector 内部差别</p>
<p>答：deque 内部有一个 map 维护很多块连续的内存，队头和队尾弹出之后，只会浪费一部分空间，如果插入时一个块满了，那就分配一个新的块。</p>
<p>项目相关：</p>
<p>问：为什么不用信号量而用条件变量呢？</p>
<p>答：信号量不知道唤醒哪一个，条件变量的 <code>notify_one()</code> 的话只会唤醒一个。(瞎说的)</p>
<p>问：服务端客户端通信的时候，你有什么安全措施吗？</p>
<p>答：客户端先用公钥加密对称秘钥，然后服务端解密，之后就用对称秘钥加密消息。我是用的 openssl。</p>
<p>安全相关：</p>
<p>问：你说下你做的些安全方面的内容</p>
<p>答：详细说了自己写的 XSS 蠕虫。。。arp欺骗，dns欺骗。</p>
<p>问：那怎么预防这个欺骗呢</p>
<p>答：只进行一次 ip 和 mac 的绑定</p>
<p>问：你搭建的 **N 的原理是什么</p>
<p>答：应用层 **N，可以绕过长*防火墙，略</p>
<p>回：你当心一点</p>
<p>问：静态路由和（没听清）路由哪个优先级高</p>
<p>答：不知道，没有复习这方面</p>
<p>网络相关：</p>
<p>问：你项目用了balabala…(其实就是问IO复用的一些接口)</p>
<p>答：其实我一开始是用select的，但是之后学了libevent更好，就用libevent重写了。还有poll、epoll之类。</p>
<p>问：那你了解过它们什么区别</p>
<p>答：最差的是select因为每次都要遍历所有文件描述符，然后poll的提升之处就是改成了链表，但是每次调用还是要从用户空间完整拷贝到内核，epoll的话只在创建的时候进行插入，插入到内核的红黑树。而且epoll支持边沿触发，事件发生后从就绪链表直接删除不再进行下一轮检查，省略100字。。。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Mess/">Mess</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Job/">Job</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-QT/Qt-issues" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/04/20/QT/Qt-issues/" class="article-date">
      <time datetime="2019-04-20T09:16:08.000Z" itemprop="datePublished">2019-04-20</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/20/QT/Qt-issues/">Qt issues</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Qt-issues"><a href="#Qt-issues" class="headerlink" title="Qt issues"></a>Qt issues</h2><h3 id="symbol-not-found-iconv"><a href="#symbol-not-found-iconv" class="headerlink" title="symbol not found: _iconv"></a>symbol not found: _iconv</h3><p><strong>problem:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dyld: Symbol not found: _iconv</span><br><span class="line">  Referenced from: /usr/lib/libcups.2.dylib</span><br><span class="line">  Expected in: /****/lib/libiconv.2.dylib</span><br><span class="line"> in /usr/lib/libcups.2.dylib</span><br></pre></td></tr></table></figure>
<p>经本人实践：在 Run 设置下，<strong>取消勾选</strong> “Add build library search path to …” 即可。</p>
<p>原方法：</p>
<p><strong>fix:</strong></p>
<ol>
<li>Go to Projects -&gt; Run -&gt; “Run Environment” (show Details)</li>
<li>I would not recommend <strong>Unset</strong>, rather you should <strong>edit</strong> Both: <strong>DYLD_LIBRARY_PATH</strong>and <strong>DYLD_FRAMEWORK_PATH</strong></li>
<li>Add <em>/usr/lib:</em> to the beginning for both paths (colon delimited string)</li>
<li>Build project again - this will fix it for good</li>
</ol>
<p><strong>from:</strong></p>
<p><a href="https://stackoverflow.com/questions/38131011/qt-application-throws-dyld-symbol-not-found-cg-jpeg-resync-to-restart" target="_blank" rel="noopener">https://stackoverflow.com/questions/38131011/qt-application-throws-dyld-symbol-not-found-cg-jpeg-resync-to-restart</a></p>
<h3 id="QLineEdit响应回车时避免Button同时响应"><a href="#QLineEdit响应回车时避免Button同时响应" class="headerlink" title="QLineEdit响应回车时避免Button同时响应"></a>QLineEdit响应回车时避免Button同时响应</h3><p>在Dialog中的按钮默认有autoDefault属性，外观都会变，而且lineEdit响应回车信号的时候，按钮会同时响应点击事件。</p>
<p>解决办法：</p>
<p>在designer中，找到QPushButton的autoDefault属性，将对勾去掉即可。</p>
<p>或者代码修改: pButton-&gt;setAutoDefault(false);</p>
<h3 id="No-rule-to-make-target-“-“-Stop"><a href="#No-rule-to-make-target-“-“-Stop" class="headerlink" title="No rule to make target “ “. Stop."></a>No rule to make target “ “. Stop.</h3><p>On Qt Creator, go into “Projects Tab”, then you can see “Shadow build”. Uncheck this and compile. The error disappears.</p>
<p>from: <a href="https://stackoverflow.com/questions/28767895/qt-no-rule-to-make-target-controlpanel-ui-needed-by-ui-controlpanel-h" target="_blank" rel="noopener">https://stackoverflow.com/questions/28767895/qt-no-rule-to-make-target-controlpanel-ui-needed-by-ui-controlpanel-h</a></p>
<p>经本人测试，只需要删除shadow build 文件夹中原有的内容（注意隐藏文件）。以及删除项目目录下自动生成的文件。</p>
<h3 id="取消创建文件时自动小写"><a href="#取消创建文件时自动小写" class="headerlink" title="取消创建文件时自动小写"></a>取消创建文件时自动小写</h3><p>preference -&gt; C++ -&gt; File Naming -&gt; Lower case file names</p>
<h2 id="to-be-continued"><a href="#to-be-continued" class="headerlink" title="to be continued"></a>to be continued</h2>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/QT/">QT</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/QT/">QT</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-QT/qt隐藏标题栏并鼠标拖动" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/04/19/QT/qt隐藏标题栏并鼠标拖动/" class="article-date">
      <time datetime="2019-04-19T07:56:38.000Z" itemprop="datePublished">2019-04-19</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/19/QT/qt隐藏标题栏并鼠标拖动/">qt隐藏标题栏并鼠标拖动</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="qt隐藏标题栏并鼠标拖动"><a href="#qt隐藏标题栏并鼠标拖动" class="headerlink" title="qt隐藏标题栏并鼠标拖动"></a>qt隐藏标题栏并鼠标拖动</h3><p>设置主题</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>-&gt;setWindowFlags(Qt::FramelessWindowHint);</span><br></pre></td></tr></table></figure>
<p>重写鼠标拖动事件</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> LoginWindow::mousePressEvent(QMouseEvent *e)</span><br><span class="line">&#123;</span><br><span class="line">    last = e-&gt;globalPos();</span><br><span class="line">    pressed = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> LoginWindow::mouseMoveEvent(QMouseEvent *e)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(!pressed)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> dx = e-&gt;globalX() - last.x();</span><br><span class="line">    <span class="keyword">int</span> dy = e-&gt;globalY() - last.y();</span><br><span class="line">    last = e-&gt;globalPos();</span><br><span class="line">    move(x()+dx, y()+dy);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> LoginWindow::mouseReleaseEvent(QMouseEvent *e)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(!pressed)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> dx = e-&gt;globalX() - last.x();</span><br><span class="line">    <span class="keyword">int</span> dy = e-&gt;globalY() - last.y();</span><br><span class="line">    move(x()+dx, y()+dy);</span><br><span class="line">    pressed = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/QT/">QT</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/QT/">QT</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Security/openssl" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/04/17/Security/openssl/" class="article-date">
      <time datetime="2019-04-16T18:59:55.000Z" itemprop="datePublished">2019-04-17</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/17/Security/openssl/">openSSL</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="openSSL"><a href="#openSSL" class="headerlink" title="openSSL"></a>openSSL</h2><p>记录一下项目中用到的OpenSSL相关内容。</p>
<h3 id="Cmake"><a href="#Cmake" class="headerlink" title="Cmake"></a>Cmake</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include_directories</span>(/opt/local/<span class="keyword">include</span>)</span><br><span class="line"><span class="keyword">link_directories</span>(/opt/local/lib)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成链接库</span></span><br><span class="line"><span class="keyword">add_library</span> (Md5Link Md5Encrypt.cpp Md5Encrypt.h)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(Md5Link crypto)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试用例</span></span><br><span class="line"><span class="keyword">add_executable</span>(test_md5 Md5Encrypt.cpp Md5Encrypt.h test_md5.cpp)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(test_md5 crypto)</span><br></pre></td></tr></table></figure>
<h3 id="Md5"><a href="#Md5" class="headerlink" title="Md5"></a>Md5</h3><p>在 <code>openssl/md5.h</code> 里有一些接口：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化 MD5 Contex, 成功返回1,失败返回0</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MD5_Init</span><span class="params">(MD5_CTX *c)</span></span>;</span><br><span class="line"><span class="comment">// 循环调用此函数,可以将不同的数据加在一起计算MD5,成功返回1,失败返回0</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MD5_Update</span><span class="params">(MD5_CTX *c, <span class="keyword">const</span> <span class="keyword">void</span> *data, <span class="keyword">size_t</span> len)</span></span>;</span><br><span class="line"><span class="comment">// 输出MD5结果数据,成功返回1,失败返回0</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MD5_Final</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> *md, MD5_CTX *c)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MD5_Init,MD5_Update,MD5_Final三个函数的组合,直接计算出MD5的值</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">char</span> *<span class="title">MD5</span><span class="params">(<span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> *d, <span class="keyword">size_t</span> n, <span class="keyword">unsigned</span> <span class="keyword">char</span> *md)</span></span>;</span><br></pre></td></tr></table></figure>
<p>因为每4位存储一个十六进制数，所以转换后一个字节的高4位和低4位都是一个数，只有16位。</p>
<p>为了以字符串形式存在数据库，实现了一个转化为32位字符串的函数：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span></span><br><span class="line">Md5Encrypt::Enc32(<span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> *in, <span class="keyword">size_t</span> inLen, <span class="keyword">unsigned</span> <span class="keyword">char</span> *out)</span><br><span class="line">&#123;</span><br><span class="line">    MD5(in, inLen, out);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">32</span>; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(i%<span class="number">2</span>)</span><br><span class="line">            out[<span class="number">31</span>-i] = (out[<span class="number">15</span>-i/<span class="number">2</span>] &amp; (<span class="keyword">char</span>)<span class="number">0xf0</span>) &gt;&gt; <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            out[<span class="number">31</span>-i] = out[<span class="number">15</span>-i/<span class="number">2</span>] &amp; (<span class="keyword">char</span>)<span class="number">0x0f</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(out[<span class="number">31</span>-i] &lt; <span class="number">10</span>)</span><br><span class="line">            out[<span class="number">31</span>-i] += <span class="string">'0'</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            out[<span class="number">31</span>-i] += <span class="string">'a'</span><span class="number">-10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Rsa"><a href="#Rsa" class="headerlink" title="Rsa"></a>Rsa</h3><p>虽然公钥私钥加密比较慢，但是在认证阶段还是只能这样来保证安全性。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;openssl/pem.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Constant.h"</span>	<span class="comment">//MAX_PASSWORD</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RsaEncrypt</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">MakeKey</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">Dec</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *in, <span class="keyword">int</span> inLen, <span class="keyword">char</span> *out, <span class="keyword">int</span> * outLen)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">Enc</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *in, <span class="keyword">int</span> inLen, <span class="keyword">char</span> *out, <span class="keyword">int</span> * outLen)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//清除加载到内存中的RSA</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Clear</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//maxCodeByte = g_nBits/8-11</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">static</span> <span class="keyword">int</span> g_nBits = (MAX_PASSWORD+<span class="number">11</span>)*<span class="number">8</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">static</span> <span class="keyword">char</span> *g_pPubFile;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">static</span> <span class="keyword">char</span> *g_pPriFile;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> RSA *m_p_pubrsa;</span><br><span class="line">    <span class="keyword">static</span> RSA *m_p_prirsa;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"RsaEncrypt.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *</span><br><span class="line">RsaEncrypt::g_pPubFile = <span class="string">"public.pem"</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *</span><br><span class="line">RsaEncrypt::g_pPriFile = <span class="string">"private.pem"</span>;</span><br><span class="line">RSA *</span><br><span class="line">RsaEncrypt::m_p_pubrsa = <span class="literal">nullptr</span>;</span><br><span class="line">RSA *</span><br><span class="line">RsaEncrypt::m_p_prirsa = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span></span><br><span class="line">RsaEncrypt::Dec(<span class="keyword">const</span> <span class="keyword">char</span> *in, <span class="keyword">int</span> inLen, <span class="keyword">char</span> *out, <span class="keyword">int</span> * outLen)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(m_p_prirsa == <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        BIO *pBio = BIO_new_file(g_pPriFile,<span class="string">"r"</span>);</span><br><span class="line">        m_p_prirsa = PEM_read_bio_RSAPrivateKey(pBio, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>);</span><br><span class="line">        BIO_free_all(pBio);</span><br><span class="line">    &#125;</span><br><span class="line">    *outLen = RSA_private_decrypt(</span><br><span class="line">            inLen,</span><br><span class="line">            (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)(in),</span><br><span class="line">            (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)(out),</span><br><span class="line">            m_p_prirsa,</span><br><span class="line">            RSA_PKCS1_PADDING);</span><br><span class="line">    <span class="keyword">if</span>(*outLen &gt;= <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span></span><br><span class="line">RsaEncrypt::Enc(<span class="keyword">const</span> <span class="keyword">char</span> *in, <span class="keyword">int</span> inLen, <span class="keyword">char</span> *out, <span class="keyword">int</span> * outLen)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(m_p_pubrsa == <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        BIO *pBio = BIO_new_file(g_pPubFile,<span class="string">"r"</span>);</span><br><span class="line">        m_p_pubrsa = PEM_read_bio_RSAPublicKey(pBio, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>);</span><br><span class="line">        BIO_free_all(pBio);</span><br><span class="line">    &#125;</span><br><span class="line">    *outLen = RSA_public_encrypt(</span><br><span class="line">            (RSA_size(m_p_pubrsa)<span class="number">-11</span>)&gt;inLen?inLen:RSA_size(m_p_pubrsa)<span class="number">-11</span>,</span><br><span class="line">            (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)(in),</span><br><span class="line">            (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)(out),</span><br><span class="line">            m_p_pubrsa,</span><br><span class="line">            RSA_PKCS1_PADDING);</span><br><span class="line">    <span class="keyword">if</span>(*outLen &gt;= <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span></span><br><span class="line">RsaEncrypt::MakeKey()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/*if (access(g_pPubFile,0) != 0 || access(g_pPriFile,0) != 0)</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">     return 0;</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">    <span class="comment">//生成key,这里如果设置了1024，意味着最多可以编解码1024/8-11=117个字节，</span></span><br><span class="line">    <span class="comment">//RSA_F4为公钥指数，一般情况下使用RSA_F4即可，</span></span><br><span class="line">    <span class="comment">//其它两个参数可以设置为NULL</span></span><br><span class="line">    RSA *pRsa = RSA_generate_key(g_nBits, RSA_F4, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>);</span><br><span class="line">    <span class="keyword">if</span> (pRsa == <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"rsa_generate_key error"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    BIO *pBio = BIO_new_file(g_pPubFile,<span class="string">"wb"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pBio == <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>( <span class="string">"BIO_new_file = %s  error"</span>,g_pPubFile);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(PEM_write_bio_RSAPublicKey(pBio,pRsa) == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"write public key error"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    BIO_free_all(pBio);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    pBio = BIO_new_file(g_pPriFile,<span class="string">"w"</span>);</span><br><span class="line">    <span class="keyword">if</span> (pBio == <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"BIO_new_file %s error "</span>,g_pPriFile);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-4</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(PEM_write_bio_RSAPrivateKey(pBio, pRsa, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>, <span class="number">0</span>, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>) == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"write private key error"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    BIO_free_all(pBio);</span><br><span class="line">    RSA_free(pRsa);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span></span><br><span class="line">RsaEncrypt::Clear() &#123;</span><br><span class="line">    <span class="keyword">if</span>(m_p_prirsa)</span><br><span class="line">        RSA_free(m_p_prirsa);</span><br><span class="line">    <span class="keyword">if</span>(m_p_pubrsa)</span><br><span class="line">        RSA_free(m_p_pubrsa);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="待续"><a href="#待续" class="headerlink" title="待续"></a>待续</h2>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Security/">Security</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C-C/">C/C++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Security/">Security</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/openSSL/">openSSL</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Algorithm/C++栈实现队列" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/04/14/Algorithm/C++栈实现队列/" class="article-date">
      <time datetime="2019-04-13T16:32:05.000Z" itemprop="datePublished">2019-04-14</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/14/Algorithm/C++栈实现队列/">C++栈实现队列</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="C-栈实现队列"><a href="#C-栈实现队列" class="headerlink" title="C++栈实现队列"></a>C++栈实现队列</h3><p>内部管理两个栈，栈1只插入数据，栈2只弹出数据。(除非当只有一个元素且在栈1的时候是由栈1直接弹出。)</p>
<p>每次栈2为空时，top操作和pop操作都会致使元素从栈1弹出并存到栈2（缓存）。然后元素从栈2弹出的顺序就和插入栈1的顺序相同，实现了先进先出。</p>
<p>注意：模仿STL库提供的接口，由用户检查插入弹出的合法性。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">myQueue</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   <span class="function"><span class="keyword">const</span> T&amp; <span class="title">front</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(stack2.empty()) &#123;</span><br><span class="line">         <span class="keyword">while</span> (!stack1.empty()) &#123;</span><br><span class="line">            stack2.push(stack1.top());</span><br><span class="line">            stack1.pop();</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> stack2.top();</span><br><span class="line">   &#125;;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(T t)</span></span>&#123;</span><br><span class="line">      stack1.push(t);</span><br><span class="line">   &#125;;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(stack2.empty()) &#123;</span><br><span class="line">         <span class="keyword">while</span>(stack1.size() &gt; <span class="number">1</span>)</span><br><span class="line">         &#123;</span><br><span class="line">            stack2.push(stack1.top());</span><br><span class="line">            stack1.pop();</span><br><span class="line">         &#125;</span><br><span class="line">         stack1.pop();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span> &#123;</span><br><span class="line">         stack2.pop();</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> stack1.empty() &amp;&amp; stack2.empty();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">size_t</span> size()&#123;</span><br><span class="line">      <span class="keyword">return</span> stack1.size() + stack2.size();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">   <span class="built_in">std</span>::<span class="built_in">stack</span>&lt;T&gt; stack1;</span><br><span class="line">   <span class="built_in">std</span>::<span class="built_in">stack</span>&lt;T&gt; stack2;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="C-队列实现栈"><a href="#C-队列实现栈" class="headerlink" title="C++队列实现栈"></a>C++队列实现栈</h3><p>内部两个列队，每次弹出操作都将元素转移到另一个列队中，剩下的最后一个弹出。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">myStack</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(T t)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(queue2.empty())</span><br><span class="line">			queue1.push(t);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			queue2.push(t);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(queue2.empty()) &#123;</span><br><span class="line">			<span class="keyword">while</span>(queue1.size() &gt; <span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				queue2.push(queue1.front());</span><br><span class="line">				queue1.pop();</span><br><span class="line">			&#125;</span><br><span class="line">			queue1.pop();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">while</span>(queue2.size() &gt; <span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				queue1.push(queue2.front());</span><br><span class="line">				queue2.pop();</span><br><span class="line">			&#125;</span><br><span class="line">			queue2.pop();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">const</span> T&amp; <span class="title">top</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(queue2.empty()) &#123;</span><br><span class="line">			<span class="keyword">return</span> queue1.back();</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> queue2.back();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> queue1.empty() &amp;&amp; queue2.empty();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">size_t</span> size() <span class="keyword">const</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> queue1.size() + queue2.size();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">queue</span>&lt;T&gt; queue1;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">queue</span>&lt;T&gt; queue2;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h3>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C-C/">C/C++</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-C-C++/C++Template/C++Compile-time-quicksort" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/04/11/C-C++/C++Template/C++Compile-time-quicksort/" class="article-date">
      <time datetime="2019-04-11T14:53:26.000Z" itemprop="datePublished">2019-04-11</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/11/C-C++/C++Template/C++Compile-time-quicksort/">C++Compile-time-quicksort</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>From: <a href="https://playfulprogramming.blogspot.com/2015/01/compile-time-quicksort-in-idiomatic.html" target="_blank" rel="noopener">https://playfulprogramming.blogspot.com/2015/01/compile-time-quicksort-in-idiomatic.html</a></p>
<p>文章太好，阅读完受益匪浅，完整拷贝防遗失。</p>
<h2 id="Compile-time-quicksort-in-idiomatic-modern-C"><a href="#Compile-time-quicksort-in-idiomatic-modern-C" class="headerlink" title="Compile time quicksort in idiomatic modern C++"></a>Compile time quicksort in idiomatic modern C++</h2><p>A contender for the most useless program ever written just got a much needed overhaul. In 2011 I <a href="http://playfulprogramming.blogspot.se/2011/09/compile-time-quick-sort-using-c.html" target="_blank" rel="noopener">wrote</a> about compile time quick sort as a challenge to myself, and as an exercise in the then newfangled variadic templates. Now, having worked with C++11 for a few years, and lately also C++14, I see that the code I wrote then is unnecessarily clumsy and highly unidiomatic.</p>
<p>In C++14 the data representation is easy. <a href="http://en.cppreference.com/w/cpp/utility/integer_sequence" target="_blank" rel="noopener">std::integer_sequence</a> fits perfectly. It really is the same as I used in 2011, but this time it’s provided by the standard library.</p>
<h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>In order to show sequences, an output streaming operator is handy:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, T ... ts&gt;</span><br><span class="line"><span class="built_in">std</span>::ostream&amp; <span class="keyword">operator</span>&lt;&lt;(<span class="built_in">std</span>::ostream&amp; os,</span><br><span class="line">                         <span class="keyword">const</span> <span class="built_in">std</span>::integer_sequence&lt;T, ts...&gt;&amp;)</span><br><span class="line">&#123;</span><br><span class="line">  os &lt;&lt; <span class="string">"&#123; "</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> T values[] &#123; ts... &#125;;</span><br><span class="line">  <span class="built_in">std</span>::copy(<span class="built_in">std</span>::begin(values),</span><br><span class="line">            <span class="built_in">std</span>::end(values),</span><br><span class="line">            <span class="built_in">std</span>::ostream_iterator&lt;T&gt;(os, <span class="string">" "</span>));</span><br><span class="line">  <span class="keyword">return</span> os &lt;&lt; <span class="string">"&#125;"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Note that the value of the integer sequence is not used. All information is in the type.  That’s why filling the values in a static array makes sense - the output stream operator function will be instantiated for each different sequence being output by a program.</p>
<h3 id="Concatenating-sequences"><a href="#Concatenating-sequences" class="headerlink" title="Concatenating sequences"></a>Concatenating sequences</h3><p>An important problem to solve is that of concatenating sequences. It will be needed in quick sort itself, since it concatenates the sorted sub sequences.</p>
<p>First an introduction of the concat template, accompanied by an alias for making life easier.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ... T&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">concat</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ... T&gt;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">concat_t</span> = <span class="keyword">typename</span> concat&lt;T...&gt;::type;</span><br></pre></td></tr></table></figure>
<p>The alias concat_t&lt;T…&gt; is a convenience. Instead of having to write using a = typename concat&lt;T…&gt;::type, you just write using a = concat_t&lt;T…&gt;.</p>
<p>In ways I dislike the naming convention (I’d like it reversed,) but it follows that of the C++14 standard library, and that is not unimportant. Regardless, I argue that the latter is not just less typing, but is easier to read too.</p>
<p>Now for the partial specializations.</p>
<p>As so often in template meta programming, the solution is recursive. First concatenating a single integer sequence is the trivial base case.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, T ... ts&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">concat</span>&lt;std::integer_sequence&lt;T, ts...&gt; &gt;</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">using</span> type = <span class="built_in">std</span>::integer_sequence&lt;T, ts...&gt;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>In ways this is even unnecessarily complicated. You can say that concatenating one type (any type) is that type itself. That would work, but I choose to make partial specializations for std::integer_sequence&lt;&gt; only, since it makes it slightly easier to catch stupid programming mistakes. It also future proofs concat, should I ever feel a need to concatenate other types.</p>
<p>The general case, concatenating two integer sequences, and some unknown tail is the same as concatenating the combination of the two integer sequences with the tail.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, T... s1, T... s2, <span class="keyword">typename</span> ... Tail&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">concat</span>&lt;std::integer_sequence&lt;T, s1...&gt;,</span></span><br><span class="line"><span class="class">              std::integer_sequence&lt;T, s2...&gt;,</span></span><br><span class="line"><span class="class">              Tail...&gt;</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">using</span> type = <span class="keyword">concat_t</span>&lt;<span class="built_in">std</span>::integer_sequence&lt;T, s1..., s2...&gt;, Tail...&gt;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Note how the convenience alias concat_t is useful even in the implementation of concat itself.</p>
<p>Let’s see if this works, using a simple program:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">using</span> s1 = <span class="built_in">std</span>::integer_sequence&lt;<span class="keyword">int</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&gt;;</span><br><span class="line">  <span class="keyword">using</span> s2 = <span class="built_in">std</span>::integer_sequence&lt;<span class="keyword">int</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&gt;;</span><br><span class="line">  <span class="keyword">using</span> s3 = <span class="built_in">std</span>::integer_sequence&lt;<span class="keyword">int</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&gt;;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="keyword">concat_t</span>&lt;s1, s2, s3&gt;&#123;&#125; &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Note that even though the output stream operator for std::integer_sequence&lt;&gt; doesn’t use the value itself, a value is none the less needed, so an instance is created.</p>
<p>The output of running the program is:</p>
<p><code>{ 1 2 3 4 5 6 7 8 9 }</code></p>
<p>so that is good.</p>
<h3 id="Partitioning"><a href="#Partitioning" class="headerlink" title="Partitioning"></a>Partitioning</h3><p>Quick sort works by partitioning the sequence into a sequence of the values less than a selected pivot element, and the rest, and then recursively sort those partitions. So partitioning a sequence into two sequences based on a predicate is important.</p>
<p>Here too, the solution is a recursive. The base case of partitioning an empty sequence is trivial:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> V, V&gt; <span class="class"><span class="keyword">class</span> <span class="title">pred</span>, <span class="title">typename</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">struct</span> <span class="title">partition</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> V, V&gt; <span class="class"><span class="keyword">class</span> <span class="title">pred</span>, <span class="title">typename</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">struct</span> <span class="title">partition</span>&lt;pred, std::integer_sequence&lt;T&gt;&gt;</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">using</span> incl_type = <span class="built_in">std</span>::integer_sequence&lt;T&gt;;</span><br><span class="line">  <span class="keyword">using</span> excl_type = <span class="built_in">std</span>::integer_sequence&lt;T&gt;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>After all, the number of elements selected by the predicate from the empty sequence are none, and likewise for those rejected by it.</p>
<p>The general case is not much more difficult:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> V, V&gt; <span class="class"><span class="keyword">class</span> <span class="title">pred</span>, <span class="title">typename</span> <span class="title">T</span>, <span class="title">T</span> <span class="title">t</span>, <span class="title">T</span> ... <span class="title">ts</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">struct</span> <span class="title">partition</span>&lt;pred, std::integer_sequence&lt;T, t, ts...&gt;&gt;</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">using</span> incl = <span class="built_in">std</span>::integer_sequence&lt;T, t&gt;;</span><br><span class="line">  <span class="keyword">using</span> excl = <span class="built_in">std</span>::integer_sequence&lt;T&gt;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">using</span> tail = partition&lt;pred, <span class="built_in">std</span>::integer_sequence&lt;T, ts...&gt; &gt;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">bool</span> outcome = pred&lt;T, t&gt;::value;</span><br><span class="line">  <span class="keyword">using</span> incl_type = <span class="keyword">concat_t</span>&lt;<span class="built_in">std</span>::<span class="keyword">conditional_t</span>&lt;outcome, incl, excl&gt;,</span><br><span class="line">                             <span class="keyword">typename</span> tail::incl_type&gt;;</span><br><span class="line">  <span class="keyword">using</span> excl_type = <span class="keyword">concat_t</span>&lt;<span class="built_in">std</span>::<span class="keyword">conditional_t</span>&lt;outcome, excl, incl&gt;,</span><br><span class="line">                             <span class="keyword">typename</span> tail::excl_type&gt;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>As always in C++ template meta programming, using alias names for things is a must to keep the code anywhere near readable.</p>
<p>Above tail is the result of the partitioning of the rest of the values. <a href="http://en.cppreference.com/w/cpp/types/conditional" target="_blank" rel="noopener">std::conditional_t</a> results in either TrueType or FalseType depending on the boolean value of the selector.</p>
<p>If we assume that the outcome of the predicate on t (the first element in the sequence) is true, then incl_type becomes the concatenation of std::integer_sequence&lt;T, t&gt; and incl_type from tail, otherwise it becomes the concatenation of the empty sequence and incl_type from tail.</p>
<p>Since this implementation builds both the included sequence and the excluded sequence in parallel, the convention of a convenience alias partition_t&lt;&gt; is of little use. It would be possible to make a filter template instead, that just provides a sequence of selected elements, but then filtering would have to be done twice, the second time with the inverted predicate, and even though we’re in compile time computation, we care about performance and avoid two-pass implementations if we can, right?</p>
<p>Let’s see how this partitioning works, with another simple program:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, T v&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">is_odd</span> :</span> <span class="built_in">std</span>::integral_constant&lt;<span class="keyword">bool</span>, v &amp; <span class="number">1</span>&gt; &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">using</span> seq = <span class="built_in">std</span>::integer_sequence&lt;<span class="keyword">int</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&gt;;</span><br><span class="line">  <span class="keyword">using</span> elems = partition&lt;is_odd, seq&gt;;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; elems::incl_type&#123;&#125; &lt;&lt; <span class="string">' '</span> &lt;&lt; elems::excl_type&#123;&#125; &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Lines 1-2 defines the simple predicate that tells if an integral value is odd. Line 7 partitions the provided sequence into those selected by the predicate and those rejected by it.</p>
<p>The result of running the program is:</p>
<p><code>{ 1 3 5 } { 2 4 6 }</code></p>
<p>so again, it looks OK.</p>
<h3 id="Quick-sort"><a href="#Quick-sort" class="headerlink" title="Quick sort"></a>Quick sort</h3><p>Given the availability of concat and partition, quicksort becomes rather simple to implement. First the typical introduction of the template:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, U, U&gt; <span class="class"><span class="keyword">class</span> <span class="title">compare</span>, <span class="title">typename</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">struct</span> <span class="title">quicksort</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, U, U&gt; <span class="class"><span class="keyword">class</span> <span class="title">compare</span>, <span class="title">typename</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">using</span> <span class="title">quicksort_t</span> = <span class="title">typename</span> <span class="title">quicksort</span>&lt;compare, T&gt;:</span>:type;</span><br></pre></td></tr></table></figure>
<p>Since quicksort only has one result, the convenience alias quicksort_t becomes handy. compare is a binary predicate accepting two values of a given type.</p>
<p>As so often, the base case is trivial.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, U, U&gt; <span class="class"><span class="keyword">class</span> <span class="title">compare</span>, <span class="title">typename</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">struct</span> <span class="title">quicksort</span>&lt;compare, std::integer_sequence&lt;T&gt;&gt;</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">using</span> type = <span class="built_in">std</span>::integer_sequence&lt;T&gt;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>After all, the result of sorting an empty sequence is always an empty sequence.</p>
<p>The general case, a partial specialization of quicksort with a binary predicate compare and an std::integer_sequence&lt;&gt; of at least one element, is surprisingly simple too:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, U, U&gt; <span class="class"><span class="keyword">class</span> <span class="title">compare</span>,</span></span><br><span class="line"><span class="class">          <span class="title">typename</span> <span class="title">T</span>, <span class="title">T</span> <span class="title">t</span>, <span class="title">T</span> ... <span class="title">ts</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">struct</span> <span class="title">quicksort</span>&lt;compare, std::integer_sequence&lt;T, t, ts...&gt;&gt;</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> V, V v&gt;</span><br><span class="line">  <span class="keyword">using</span> pred = compare&lt;V, v, t&gt;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">using</span> partitions = partition&lt;pred, <span class="built_in">std</span>::integer_sequence&lt;T, ts...&gt;&gt;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">using</span> incl_seq = <span class="keyword">typename</span> partitions::incl_type;</span><br><span class="line">  <span class="keyword">using</span> excl_seq = <span class="keyword">typename</span> partitions::excl_type;</span><br><span class="line">  <span class="keyword">using</span> type = <span class="keyword">concat_t</span>&lt;<span class="keyword">quicksort_t</span>&lt;compare, incl_seq&gt;,</span><br><span class="line">                        <span class="built_in">std</span>::integer_sequence&lt;T, t&gt;,</span><br><span class="line">                        <span class="keyword">quicksort_t</span>&lt;compare, excl_seq&gt; &gt;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Lines 5-6 is an interesting template alias. It makes a unary predicate from the binary predicate compare and the first element of the sequence, t. So, the first element becomes the pivot element to partition the rest of the elements around, and partition requires a unary predicate as its selection criteria. As an example, if compare is “less than”, and the first element t is 8, then predbecomes “is less than 8”.</p>
<p>Line 8 is where this partitioning is done.</p>
<p>Lines 10-11 are just short hand conveniences to make lines 12-14 readable.</p>
<p>Lines 12-14 are just as from the text book, the result of quick sort is the concatenation of quick sort on the partition of elements included by the predicate, the pivot element, and the result of quick sort on the partition of elements excluded by the predicate.</p>
<p>Another simple program shows the result:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, T lh, T rh&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">less</span> :</span> <span class="built_in">std</span>::integral_constant&lt;<span class="keyword">bool</span>, (lh &lt; rh)&gt; &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">using</span> seq = <span class="built_in">std</span>::integer_sequence&lt;<span class="keyword">int</span>, <span class="number">32</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">99</span>, <span class="number">101</span>, <span class="number">5</span>&gt;;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="keyword">quicksort_t</span>&lt;less, seq&gt;&#123;&#125; &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The output from running this program is unsurprisingly:</p>
<p><code>{ 1 3 4 5 7 8 32 99 101 }</code></p>
<h3 id="A-word-on-performance"><a href="#A-word-on-performance" class="headerlink" title="A word on performance"></a>A word on performance</h3><p>Everyone who has studied algorithms knows that it’s poor practice to partition the elements around the first element for quick sort, since it gives sorting an already sorted sequence O(n²) complexity. For any deterministic element selection, there is a vulnerable family of sequences, so to protect against this, the selection of the pivot element for partitioning should be random. Just two days ago, a solution to this was shown by <a href="http://mattbierner.com/" target="_blank" rel="noopener">Matt Bierner</a> in his blog post <a href="http://blog.mattbierner.com/stupid-template-tricks-compile-time-pseudo-random-number-generator/" target="_blank" rel="noopener">“Compile Time Pseudo-Random Number Generator”</a>.  I leave it as an exercise for someone else to improve on the quick sort implementation.</p>
<h3 id="Wrap-up"><a href="#Wrap-up" class="headerlink" title="Wrap up"></a>Wrap up</h3><p>The readability of this code is vastly improved over the 2011 original, and its shorter too. Using alias templates does not just save typing, but also removes the need for many transformation templates. Performance is also improved over the 2011 original, which used two pass partitioning using a filter.</p>
<p>The utter uselessness of compile time quicksort, however, is not threatened.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/C-C/">C/C++</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C-C/">C/C++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MetaProgram/">MetaProgram</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Algorithm/Data Structure/Hash" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/04/11/Algorithm/Data Structure/Hash/" class="article-date">
      <time datetime="2019-04-11T09:36:44.000Z" itemprop="datePublished">2019-04-11</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/11/Algorithm/Data Structure/Hash/">Hash</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Hash知识点整理"><a href="#Hash知识点整理" class="headerlink" title="Hash知识点整理"></a>Hash知识点整理</h2><h3 id="哈希函数"><a href="#哈希函数" class="headerlink" title="哈希函数"></a>哈希函数</h3><p>构造哈希函数的<strong>原则</strong>是：</p>
<ol>
<li>函数本身便于计算；</li>
<li>计算出来的地址分布均匀，目的是尽可能减少冲突。</li>
</ol>
<p>构造哈希函数常用的五种方法：</p>
<ol>
<li><p><strong>数字分析法</strong></p>
<p>如果事先知道关键字集合，并且每个关键字的位数比哈希表的地址码位数多时，可以从关键字中选出分布较均匀的若干位，构成哈希地址。</p>
</li>
<li><p><strong>平方取中法</strong></p>
<p>当无法确定关键字中哪几位分布较均匀时，可以先求出关键字的平方值，然后按需要取平方值的中间几位作为哈希地址。这是因为：平方后中间几位和关键字中每一位都相关，故不同关键字会以较高的概率产生不同的哈希地址。</p>
</li>
<li><p><strong>分段叠加法</strong></p>
<p>按哈希表地址位数将关键字分成位数相等的几部分（最后一部分可以较短），然后将这几部分相加，舍弃最高进位后的结果就是该关键字的哈希地址。</p>
<p>具体方法有<strong>折叠法</strong>与<strong>移位法。</strong>移位法是将分割后的每部分低位对齐相加，折叠法是从一端向另一端沿分割界来回折叠（奇数段为正序，偶数段为倒序），然后将各段相加。</p>
</li>
<li><p><strong>除留余数法</strong></p>
<p>假设哈希表长为<em>m</em>，<em>p</em>为小于等于<em>m</em>的最大素数，则哈希函数为</p>
<p><em>h</em>(<em>k</em>) = <em>k % p</em> 。</p>
<p>素数是为了防止当数列的间隔比较稳定时产生大量冲突。</p>
</li>
<li><p><strong>伪随机数法</strong></p>
<p>采用一个伪随机函数做哈希函数，即<em>h(key)=random(key)</em>。</p>
</li>
</ol>
<hr>
<p>在实际应用中，应根据具体情况，灵活采用不同的方法，并用实际数据测试它的性能，以便做出正确判定。通常应考虑以下五个因素 ：</p>
<ul>
<li><p>计算哈希函数所需时间 （简单）。</p>
</li>
<li><p>关键字的长度。</p>
</li>
<li><p>哈希表大小。</p>
</li>
<li><p>关键字分布情况。</p>
</li>
<li><p>记录查找频率。</p>
</li>
</ul>
<h3 id="处理冲突的方法"><a href="#处理冲突的方法" class="headerlink" title="处理冲突的方法"></a>处理冲突的方法</h3><ol>
<li><p>开放定址法/再散列法</p>
<p>这种方法也称<strong>再散列法，</strong>其基本思想是：当关键字<em>key</em>的哈希地址<em>p</em>出现冲突时，以<em>p</em>为基础，产生另一个哈希地址<em>p1</em>，如果<em>p1</em>仍然冲突，再以<em>p1</em>为基础，产生另一个哈希地址<em>p2</em>, … 直到找出一个不冲突的哈希地址<em>pi</em>。</p>
</li>
<li><p>拉链法/链地址法/哈希桶</p>
<p>将所有哈希地址为<em>i</em>的元素构成一个称为<strong>同义词链</strong>的单链表，并将单链表的头指针存在哈希表的第<em>i</em>个单元中，因而查找、插入和删除主要在同义词链中进行。链地址法适用于经常进行插入和删除的情况。</p>
</li>
<li><p>溢出法</p>
<p>将哈希表分为<strong>基本表</strong>和<strong>溢出表</strong>两部分，凡是和基本表发生冲突的元素，一律填入溢出表。</p>
</li>
</ol>
<h2 id="待续"><a href="#待续" class="headerlink" title="待续"></a>待续</h2>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-C-C++/C++Collection/C++bitset" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/04/11/C-C++/C++Collection/C++bitset/" class="article-date">
      <time datetime="2019-04-10T17:57:21.000Z" itemprop="datePublished">2019-04-11</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/11/C-C++/C++Collection/C++bitset/">C++bitset</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="C-bitset"><a href="#C-bitset" class="headerlink" title="C++bitset"></a>C++bitset</h2><p><code>bitset</code> represents a fixed-size sequence of <code>N</code> bits. Bitsets can be manipulated by standard logic operators and converted to and from strings and integers.</p>
<h3 id="construct"><a href="#construct" class="headerlink" title="construct"></a>construct</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// empty constructor</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">bitset</span>&lt;8&gt; b1; <span class="comment">// [0,0,0,0,0,0,0,0]</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// unsigned long long constructor</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">bitset</span>&lt;8&gt; b2(<span class="number">42</span>);          <span class="comment">// [0,0,1,0,1,0,1,0]</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">bitset</span>&lt;8&gt; bs(<span class="number">0xfff0</span>);      <span class="comment">// [1,1,1,1,0,0,0,0]</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// string constructor</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">string</span> bit_string = <span class="string">"110010"</span>;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">bitset</span>&lt;8&gt; b3(bit_string);       <span class="comment">// [0,0,1,1,0,0,1,0]</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">bitset</span>&lt;8&gt; b4(bit_string, <span class="number">2</span>);    <span class="comment">// [0,0,0,0,0,0,1,0]</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">bitset</span>&lt;8&gt; b5(bit_string, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// [0,0,0,0,0,0,0,1]</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// string constructor using custom zero/one digits</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">string</span> alpha_bit_string = <span class="string">"aBaaBBaB"</span>;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">bitset</span>&lt;8&gt; b6(alpha_bit_string, <span class="number">0</span>, alpha_bit_string.size(), <span class="string">'a'</span>, <span class="string">'B'</span>);</span><br><span class="line"><span class="comment">// [0,1,0,0,1,1,0,1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// char* constructor using custom digits</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">bitset</span>&lt;8&gt; b7(<span class="string">"XXXXYYYY"</span>, <span class="number">8</span>, <span class="string">'X'</span>, <span class="string">'Y'</span>); <span class="comment">// [0,0,0,0,1,1,1,1]</span></span><br></pre></td></tr></table></figure>
<h3 id="Element-access"><a href="#Element-access" class="headerlink" title="Element access"></a>Element access</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span>[pos];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">test</span><span class="params">(pos)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">all</span><span class="params">()</span></span>;	<span class="comment">//all set, C++11</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">any</span><span class="params">()</span></span>;	<span class="comment">//any set</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">none</span><span class="params">()</span></span>;	<span class="comment">//none set</span></span><br><span class="line"></span><br><span class="line">count();	<span class="comment">//return the number of bits set to true</span></span><br><span class="line">size();		<span class="comment">//return the size of bits that the bitset can hold</span></span><br></pre></td></tr></table></figure>
<h3 id="Modifiers"><a href="#Modifiers" class="headerlink" title="Modifiers"></a>Modifiers</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// all return *this</span></span><br><span class="line"><span class="built_in">set</span>();						<span class="comment">//set all to true</span></span><br><span class="line"><span class="built_in">set</span>(pos);					<span class="comment">//set pos to true</span></span><br><span class="line"><span class="built_in">set</span>(pos, <span class="literal">false</span>);	<span class="comment">//set pos to false</span></span><br><span class="line"></span><br><span class="line">reset();					<span class="comment">//set all to false</span></span><br><span class="line">reset(pos);				<span class="comment">//set pos to false</span></span><br><span class="line"></span><br><span class="line">flip();						<span class="comment">//flip是翻转的意思</span></span><br><span class="line">flip(pos);</span><br><span class="line"></span><br><span class="line"><span class="comment">//overloaded: &amp;  |  ^  &lt;&lt;  &gt;&gt;  ==  !=</span></span><br></pre></td></tr></table></figure>
<h3 id="Conversions"><a href="#Conversions" class="headerlink" title="Conversions"></a>Conversions</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">to_string(zero = <span class="string">'0'</span>, one = <span class="string">'1'</span>);	<span class="comment">//转化为01字符串，可以修改0和1的表达字符</span></span><br><span class="line">to_ulong();</span><br><span class="line">to_ullong();		<span class="comment">//C++11</span></span><br></pre></td></tr></table></figure>
<h2 id="End"><a href="#End" class="headerlink" title="End"></a>End</h2>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/C-C/">C/C++</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C-C/">C/C++</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-C-C++/C++Template/C++可变参数模板" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/04/11/C-C++/C++Template/C++可变参数模板/" class="article-date">
      <time datetime="2019-04-10T17:18:09.000Z" itemprop="datePublished">2019-04-11</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/11/C-C++/C++Template/C++可变参数模板/">C++可变参数模板</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="C-可变参数模板"><a href="#C-可变参数模板" class="headerlink" title="C++可变参数模板"></a>C++可变参数模板</h2><p>这个还是看例子最直观。</p>
<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">show_list</span><span class="params">(Args... args)</span></span>&#123;</span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>其中Args是一个<strong>模板参数包</strong>，args是一个<strong>函数参数包</strong>。</p>
<p><strong><em>args包含的值列表与模板参数包Args包含的类型列表匹配。</em></strong></p>
</li>
<li><p>默认是按值传递参数，可以为可变参数模板指定展开模式，比如const、&amp;。</p>
</li>
<li><p>将省略号放在函数参数包右边即可展开参数包。</p>
</li>
<li><p>参数个数为 <code>sizeof…(Args)</code></p>
</li>
<li><p>使用时需要递归展开</p>
</li>
</ul>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><h4 id="可变参数函数模板"><a href="#可变参数函数模板" class="headerlink" title="可变参数函数模板"></a>可变参数函数模板</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// definition for 0 parameters</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">show_list</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// definition for 1 parameter</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">show_list</span><span class="params">(<span class="keyword">const</span> T&amp; value)</span></span>&#123;</span><br><span class="line">  	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; value &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// definition for 2 or more parameters</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">show_list</span><span class="params">(<span class="keyword">const</span> T&amp; value, <span class="keyword">const</span> Args&amp;... args)</span></span>&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; value &lt;&lt; <span class="string">','</span>;</span><br><span class="line">		show_list(args...);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="可变参数类模板"><a href="#可变参数类模板" class="headerlink" title="可变参数类模板"></a>可变参数类模板</h4><p>模板元编程的例子，组合integer_sequence。</p>
<p>为可变参数类模板特例化的时候要依据特例化需要的参数来写模板参数。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt; //integer_sequence</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, T... ts&gt;</span><br><span class="line"><span class="built_in">std</span>::ostream&amp; <span class="keyword">operator</span>&lt;&lt;(<span class="built_in">std</span>::ostream&amp; os,</span><br><span class="line">                         <span class="keyword">const</span> <span class="built_in">std</span>::integer_sequence&lt;T, ts...&gt;&amp;)</span><br><span class="line">&#123;</span><br><span class="line">    os &lt;&lt; <span class="string">"&#123; "</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> T values[] &#123; ts... &#125;;</span><br><span class="line">    <span class="built_in">std</span>::copy(<span class="built_in">std</span>::begin(values),</span><br><span class="line">              <span class="built_in">std</span>::end(values),</span><br><span class="line">              <span class="built_in">std</span>::ostream_iterator&lt;T&gt;(os, <span class="string">" "</span>));</span><br><span class="line">    <span class="keyword">return</span> os &lt;&lt; <span class="string">"&#125;"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">concat</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, T... ts&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">concat</span>&lt;std::integer_sequence&lt;T, ts...&gt; &gt;</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">using</span> type = <span class="built_in">std</span>::integer_sequence&lt;T, ts...&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, T... s1, T... s2, <span class="keyword">typename</span>... Tail&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">concat</span>&lt;</span></span><br><span class="line"><span class="class">        std::integer_sequence&lt;T, s1...&gt;,</span></span><br><span class="line"><span class="class">        std::integer_sequence&lt;T, s2...&gt;,</span></span><br><span class="line"><span class="class">        Tail...&gt;</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">using</span> type =<span class="keyword">typename</span> concat&lt;</span><br><span class="line">            <span class="built_in">std</span>::integer_sequence&lt;T, s1..., s2...&gt;,</span><br><span class="line">            Tail...&gt;::type ;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">using</span> s1 = <span class="built_in">std</span>::integer_sequence&lt;<span class="keyword">int</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&gt;;</span><br><span class="line">    <span class="keyword">using</span> s2 = <span class="built_in">std</span>::integer_sequence&lt;<span class="keyword">int</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&gt;;</span><br><span class="line">    <span class="keyword">using</span> s3 = <span class="built_in">std</span>::integer_sequence&lt;<span class="keyword">int</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&gt;;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; concat&lt;s1, s2, s3&gt;::type&#123;&#125; &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/C-C/">C/C++</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C-C/">C/C++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MetaProgram/">MetaProgram</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/4/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/6/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2017-2022 Skuaka
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="A fast, simple &amp; powerful blog framework">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="Another simple and elegant theme for Hexo  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style="display:none">
                        <span id="site-visit" title="Site Visitors"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style="display:none">
                        <span id="page-visit" title="Page Hits"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 1;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="Back to Top"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="Comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="Go to Bottom"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>